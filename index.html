<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>C√¥ng b·ªë ng∆∞·ªùi tr√∫ng gi·∫£i</title>
  <style>
    body {
      margin: 0;
      background: #111;
      font-family: Arial, sans-serif;
      color: white;
      padding: 20px;
    }

    .container {
      max-width: 1400px;
      margin: auto;
    }

    h1 {
      text-align: center;
      margin-bottom: 20px;
      color: #ffd54f;
      font-size: 2.2em;
      font-weight: bold;
    }

    .input-box {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }

    .input-box input {
      padding: 15px;
      font-size: 1.2em;
      width: 120px;
      text-align: center;
      border-radius: 8px;
      border: 2px solid #ffeb3b;
      background: #222;
      color: #fff;
    }

    .btn {
      padding: 15px 35px;
      background: #ffeb3b;
      color: #111;
      font-weight: bold;
      font-size: 1.2em;
      border-radius: 10px;
      cursor: pointer;
      border: none;
    }

    /* ----- GRID HI·ªÇN TH·ªä 3 NG∆Ø·ªúI TH·∫ÆNG ----- */
    .winners-grid {
      display: grid;
      grid-template-columns: 1fr 1.2fr 1fr; /* Top 1 ·ªü gi·ªØa l·ªõn h∆°n */
      gap: 25px;
      margin-top: 40px;
      align-items: start;
    }

    .winner-card {
      background: #222;
      border-radius: 15px;
      padding-bottom: 15px;
      text-align: center;
      box-shadow: 0 0 25px rgba(255,255,255,0.1);
    }

    .winner-card.champion {
      transform: scale(1.15);
      border: 4px solid gold;
      box-shadow: 0 0 35px gold;
    }

    .winner-image {
      width: 100%;
      aspect-ratio: 3/4;
      object-fit: cover;
      border-bottom: 3px solid #000;
      border-radius: 15px 15px 0 0;
      background: #333;
    }

    .code {
      font-size: 2em;
      color: #ffeb3b;
      font-weight: bold;
      margin-top: 10px;
    }

    @media (max-width: 900px) {
      .winners-grid {
        grid-template-columns: 1fr;
      }
      .winner-card.champion {
        transform: none;
      }
    }
  </style>
</head>
<body>

<div class="container">
  <h1>üéâ C√îNG B·ªê NG∆Ø·ªúI TR√öNG GI·∫¢I üéâ</h1>

  <div class="input-box">
    <input id="c1" placeholder="#001">
    <input id="c2" placeholder="#002">
    <input id="c3" placeholder="#003">
    <button class="btn" onclick="loadData()">HI·ªÇN TH·ªä</button>
  </div>

  <div id="display"></div>
</div>

<script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>

<script>
const CSV_URL = "https://docs.google.com/spreadsheets/d/1ZID_T4OaP5fUs2q1iQXefVBs0H--MgM9DtBQz2WOm7M/export?format=csv";

function normalize(code){
  code = code.trim().toUpperCase();
  return code.startsWith("#") ? code : "#" + code;
}

async function loadData() {
  let codes = [
    normalize(document.getElementById("c1").value),
    normalize(document.getElementById("c2").value),
    normalize(document.getElementById("c3").value)
  ];

  const response = await fetch(CSV_URL);
  const csv = await response.text();
  const parsed = Papa.parse(csv, { header: false }).data;

  let list = [];
  parsed.slice(1).forEach(row => {
    if(row.length >= 5 && codes.includes(row[4])){
      list.push({
        name: row[0],
        school: row[1],
        age: row[2],
        image: row[3],
        code: row[4]
      });
    }
  });

  if(list.length !== 3){
    document.getElementById("display").innerHTML = "<h2 style='text-align:center;color:red;'>Kh√¥ng t√¨m ƒë·ªß 3 ng∆∞·ªùi!</h2>";
    return;
  }

  // ƒê∆∞a TOP 1 v√†o gi·ªØa
  list = [list[1], list[0], list[2]];

  document.getElementById("display").innerHTML = `
    <div class="winners-grid">
      ${list.map((w,i)=>`
        <div class="winner-card ${i===1 ? 'champion' : ''}">
          <img class="winner-image" src="${w.image}">
          <div class="code">${w.code}</div>
          <div>${w.name}</div>
          <div>${w.school}</div>
          <div>Tu·ªïi: ${w.age}</div>
        </div>
      `).join("")}
    </div>
  `;
}
</script>

</body>
</html>
